{% extends "base.html" %}
{% block content %}
<h2>Agency Dashboard - Student Applications</h2>
<table class="table">
  <thead>
    <tr>
      <th>Student Name</th>
      <th>Nationality</th>
      <th>Country of Residence</th>
      <th>Program Name</th>
      <th>Assigned Advisor</th>
      <th>Status</th>
      <th>Deadline</th>
      <th>Application Date</th>
    </tr>
  </thead>
  <tbody>
    {% for application in student_applications %}
    <tr>
      <td>{{ application.student.full_name }}</td>
      <td>{{ application.student.nationality }}</td>
      <td>{{ application.student.country_of_residence }}</td>
      <td>{{ application.program.name }}</td>
      <td>
        {{ assigned_advisors.get(application.student.id ~ '-' ~ application.program.id, 'N/A') }}
      </td>
      <td>{{ application.status }}</td>
      <td>
        {% if application.program.deadline %}
          {{ application.program.deadline.strftime('%Y-%m-%d') }}
        {% else %}
          N/A
        {% endif %}
      </td>
      <td>{{ application.created_at.strftime('%Y-%m-%d') }}</td>
    </tr>
    {% else %}
    <tr>
      <td colspan="8">No student applications found.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
